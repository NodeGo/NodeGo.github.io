<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JavaScript,编码规范," />





  <link rel="alternate" href="/atom.xml" title="Chelsia Daily Book" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="1 前言随着 ECMAScript 的不断发展，越来越多更新的语言特性将被使用，给应用的开发带来方便。本文档的目标是使 ECMAScript 新特性的代码风格保持一致，并给予一些实践建议。 本文档仅包含新特性部分。基础部分请遵循 JavaScript Style Guide。 由于 ECMAScript 依然在快速的不断发展，本文档也将可能随时保持更新。更新内容主要涉及对新增的语言特性的格式规范化">
<meta name="keywords" content="JavaScript,编码规范">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript 编码规范 - ESNext 补充篇（草案）">
<meta property="og:url" content="https://www.hqxdb.com/2017/08/23/JS书写规范/es-next-style-guide/index.html">
<meta property="og:site_name" content="Chelsia Daily Book">
<meta property="og:description" content="1 前言随着 ECMAScript 的不断发展，越来越多更新的语言特性将被使用，给应用的开发带来方便。本文档的目标是使 ECMAScript 新特性的代码风格保持一致，并给予一些实践建议。 本文档仅包含新特性部分。基础部分请遵循 JavaScript Style Guide。 由于 ECMAScript 依然在快速的不断发展，本文档也将可能随时保持更新。更新内容主要涉及对新增的语言特性的格式规范化">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-08-27T02:51:43.716Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript 编码规范 - ESNext 补充篇（草案）">
<meta name="twitter:description" content="1 前言随着 ECMAScript 的不断发展，越来越多更新的语言特性将被使用，给应用的开发带来方便。本文档的目标是使 ECMAScript 新特性的代码风格保持一致，并给予一些实践建议。 本文档仅包含新特性部分。基础部分请遵循 JavaScript Style Guide。 由于 ECMAScript 依然在快速的不断发展，本文档也将可能随时保持更新。更新内容主要涉及对新增的语言特性的格式规范化">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '7G3J3OYB0V',
      apiKey: '477d2f10448568bb02365fe59d6be944',
      indexName: 'hqxdb',
      hits: {"per_page":10},
      labels: {"input_placeholder":"输入关键字","hits_empty":"没有找到与: ${query} 相关的内容","hits_stats":"${hits} 条相关记录， 共耗时 ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.hqxdb.com/2017/08/23/JS书写规范/es-next-style-guide/"/>





  <title>JavaScript 编码规范 - ESNext 补充篇（草案） | Chelsia Daily Book</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f5c3843939bf0a0093a4220362bf14be";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chelsia Daily Book</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
           

          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.hqxdb.com/2017/08/23/JS书写规范/es-next-style-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chelsia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chelsia Daily Book">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScript 编码规范 - ESNext 补充篇（草案）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-23T22:06:46+08:00">
                2017-08-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/规范/" itemprop="url" rel="index">
                    <span itemprop="name">规范</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/08/23/JS书写规范/es-next-style-guide/" class="leancloud_visitors" data-flag-title="JavaScript 编码规范 - ESNext 补充篇（草案）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,003
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  20分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
      
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h2><p>随着 ECMAScript 的不断发展，越来越多更新的语言特性将被使用，给应用的开发带来方便。本文档的目标是使 ECMAScript 新特性的代码风格保持一致，并给予一些实践建议。</p>
<p>本文档仅包含新特性部分。基础部分请遵循 <a href="javascript-style-guide.md">JavaScript Style Guide</a>。</p>
<p>由于 ECMAScript 依然在快速的不断发展，本文档也将可能随时保持更新。更新内容主要涉及对新增的语言特性的格式规范化、实践指导，引擎与编译器环境变化的使用指导。</p>
<p>虽然本文档是针对 ECMAScript 设计的，但是在使用各种基于 ECMAScript 扩展的语言时(如 JSX、TypeScript 等)，适用的部分也应尽量遵循本文档的约定。</p>
<a id="more"></a> 
<h2 id="2-代码风格"><a href="#2-代码风格" class="headerlink" title="2 代码风格"></a>2 代码风格</h2><h3 id="2-1-文件"><a href="#2-1-文件" class="headerlink" title="2.1 文件"></a>2.1 文件</h3><h5 id="建议-ESNext-语法的-JavaScript-文件使用-js-扩展名。"><a href="#建议-ESNext-语法的-JavaScript-文件使用-js-扩展名。" class="headerlink" title="[建议] ESNext 语法的 JavaScript 文件使用 .js 扩展名。"></a>[建议] ESNext 语法的 JavaScript 文件使用 <code>.js</code> 扩展名。</h5><h5 id="强制-当文件无法使用-js-扩展名时，使用-es-扩展名。"><a href="#强制-当文件无法使用-js-扩展名时，使用-es-扩展名。" class="headerlink" title="[强制] 当文件无法使用 .js 扩展名时，使用 .es 扩展名。"></a>[强制] 当文件无法使用 <code>.js</code> 扩展名时，使用 <code>.es</code> 扩展名。</h5><p>解释：</p>
<p>某些应用开发时，可能同时包含 ES 5和 ESNext 文件，运行环境仅支持 ES5，ESNext 文件需要经过预编译。部分场景下，编译工具的选择可能需要通过扩展名区分，需要重新定义ESNext文件的扩展名。此时，ESNext 文件必须使用 <code>.es</code> 扩展名。</p>
<p>但是，更推荐使用其他条件作为是否需要编译的区分：</p>
<ol>
<li>基于文件内容。</li>
<li>不同类型文件放在不同目录下。</li>
</ol>
<h3 id="2-2-结构"><a href="#2-2-结构" class="headerlink" title="2.2 结构"></a>2.2 结构</h3><h4 id="2-2-1-缩进"><a href="#2-2-1-缩进" class="headerlink" title="2.2.1 缩进"></a>2.2.1 缩进</h4><h5 id="建议-使用多行模板字符串时遵循缩进原则。当空行与空白字符敏感时，不使用多行模板字符串。"><a href="#建议-使用多行模板字符串时遵循缩进原则。当空行与空白字符敏感时，不使用多行模板字符串。" class="headerlink" title="[建议] 使用多行模板字符串时遵循缩进原则。当空行与空白字符敏感时，不使用多行模板字符串。"></a>[建议] 使用多行模板字符串时遵循缩进原则。当空行与空白字符敏感时，不使用多行模板字符串。</h5><p>解释：</p>
<p><code>4</code> 空格为一个缩进，换行后添加一层缩进。将起始和结束的 <code>` </code> 符号单独放一行，有助于生成 HTML 时的标签对齐。</p>
<p>为避免破坏缩进的统一，当空行与空白字符敏感时，建议使用 <code>多个模板字符串</code> 或 <code>普通字符串</code> 进行连接运算，也可使用数组 <code>join</code> 生成字符串。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> html = <span class="string">`</span></div><div class="line"><span class="string">        &lt;div&gt;</span></div><div class="line"><span class="string">            &lt;p&gt;&lt;/p&gt;</span></div><div class="line"><span class="string">            &lt;p&gt;&lt;/p&gt;</span></div><div class="line"><span class="string">        &lt;/div&gt;</span></div><div class="line"><span class="string">    `</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">greeting</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello, \n'</span></div><div class="line">        + <span class="string">`<span class="subst">$&#123;name.firstName&#125;</span> <span class="subst">$&#123;name.lastName&#125;</span>`</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">greeting</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`Hello,</span></div><div class="line"><span class="string"><span class="subst">$&#123;name.firstName&#125;</span> <span class="subst">$&#123;name.lastName&#125;</span>`</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-2-2-空格"><a href="#2-2-2-空格" class="headerlink" title="2.2.2 空格"></a>2.2.2 空格</h4><h5 id="强制-使用-generator-时，-前面不允许有空格，-后面必须有一个空格。"><a href="#强制-使用-generator-时，-前面不允许有空格，-后面必须有一个空格。" class="headerlink" title="[强制] 使用 generator 时，* 前面不允许有空格，* 后面必须有一个空格。"></a>[强制] 使用 <code>generator</code> 时，<code>*</code> 前面不允许有空格，<code>*</code> 后面必须有一个空格。</h5><p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">caller</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">yield</span> <span class="string">'a'</span>;</div><div class="line">    <span class="keyword">yield</span>* callee();</div><div class="line">    <span class="keyword">yield</span> <span class="string">'d'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> * <span class="title">caller</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">yield</span> <span class="string">'a'</span>;</div><div class="line">    <span class="keyword">yield</span> *callee();</div><div class="line">    <span class="keyword">yield</span> <span class="string">'d'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-2-3-语句"><a href="#2-2-3-语句" class="headerlink" title="2.2.3 语句"></a>2.2.3 语句</h4><h5 id="强制-类声明结束不允许添加分号。"><a href="#强制-类声明结束不允许添加分号。" class="headerlink" title="[强制] 类声明结束不允许添加分号。"></a>[强制] 类声明结束不允许添加分号。</h5><p>解释：</p>
<p>与函数声明保持一致。</p>
<h5 id="强制-类成员定义中，方法定义后不允许添加分号，成员属性定义后必须添加分号。"><a href="#强制-类成员定义中，方法定义后不允许添加分号，成员属性定义后必须添加分号。" class="headerlink" title="[强制] 类成员定义中，方法定义后不允许添加分号，成员属性定义后必须添加分号。"></a>[强制] 类成员定义中，方法定义后不允许添加分号，成员属性定义后必须添加分号。</h5><p>解释：</p>
<p>成员属性是当前 <strong>Stage 0</strong> 的标准，如果使用的话，则定义后加上分号。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">    foo = <span class="number">3</span>;</div><div class="line"></div><div class="line">    bar() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">    foo = <span class="number">3</span></div><div class="line"></div><div class="line">    bar() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="强制-export-语句后，不允许出现表示空语句的分号。"><a href="#强制-export-语句后，不允许出现表示空语句的分号。" class="headerlink" title="[强制] export 语句后，不允许出现表示空语句的分号。"></a>[强制] <code>export</code> 语句后，不允许出现表示空语句的分号。</h5><p>解释：</p>
<p><code>export</code> 关键字不影响后续语句类型。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h5 id="强制-属性装饰器后，可以不加分号的场景，不允许加分号。"><a href="#强制-属性装饰器后，可以不加分号的场景，不允许加分号。" class="headerlink" title="[强制] 属性装饰器后，可以不加分号的场景，不允许加分号。"></a>[强制] 属性装饰器后，可以不加分号的场景，不允许加分号。</h5><p>解释：</p>
<p>只有一种场景是必须加分号的：当属性 <code>key</code> 是 <code>computed property key</code> 时，其装饰器必须加分号，否则修饰 <code>key</code> 的 <code>[]</code> 会做为之前表达式的 <code>property accessor</code>。</p>
<p>上面描述的场景，装饰器后需要加分号。其余场景下的属性装饰器后不允许加分号。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">    @log(<span class="string">'INFO'</span>)</div><div class="line">    bar() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @log(<span class="string">'INFO'</span>);</div><div class="line">    [<span class="string">'bar'</span> + <span class="number">2</span>]() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">    @log(<span class="string">'INFO'</span>);</div><div class="line">    bar() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @log(<span class="string">'INFO'</span>)</div><div class="line">    [<span class="string">'bar'</span> + <span class="number">2</span>]() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="强制-箭头函数的参数只有一个，并且不包含解构时，参数部分的括号必须省略。"><a href="#强制-箭头函数的参数只有一个，并且不包含解构时，参数部分的括号必须省略。" class="headerlink" title="[强制] 箭头函数的参数只有一个，并且不包含解构时，参数部分的括号必须省略。"></a>[强制] 箭头函数的参数只有一个，并且不包含解构时，参数部分的括号必须省略。</h5><p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">list.map(<span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> fetchName = <span class="keyword">async</span> id =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> user = <span class="keyword">await</span> request(<span class="string">`users/<span class="subst">$&#123;id&#125;</span>`</span>);</div><div class="line">    <span class="keyword">return</span> user.fullName;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">list.map(<span class="function">(<span class="params">item</span>) =&gt;</span> item * <span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> fetchName = <span class="keyword">async</span> (id) =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> user = <span class="keyword">await</span> request(<span class="string">`users/<span class="subst">$&#123;id&#125;</span>`</span>);</div><div class="line">    <span class="keyword">return</span> user.fullName;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h5 id="建议-箭头函数的函数体只有一个单行表达式语句，且作为返回值时，省略-和-return。"><a href="#建议-箭头函数的函数体只有一个单行表达式语句，且作为返回值时，省略-和-return。" class="headerlink" title="[建议] 箭头函数的函数体只有一个单行表达式语句，且作为返回值时，省略 {} 和 return。"></a>[建议] 箭头函数的函数体只有一个单行表达式语句，且作为返回值时，省略 <code>{}</code> 和 <code>return</code>。</h5><p>如果单个表达式过长，可以使用 <code>()</code> 进行包裹。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">list.map(<span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="keyword">let</span> foo = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">    condition</div><div class="line">        ? returnValueA()</div><div class="line">        : returnValueB()</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">list.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> item * <span class="number">2</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h5 id="建议-箭头函数的函数体只有一个-Object-Literal，且作为返回值时，使用-包裹。"><a href="#建议-箭头函数的函数体只有一个-Object-Literal，且作为返回值时，使用-包裹。" class="headerlink" title="[建议] 箭头函数的函数体只有一个 Object Literal，且作为返回值时，使用 () 包裹。"></a>[建议] 箭头函数的函数体只有一个 <code>Object Literal</code>，且作为返回值时，使用 <code>()</code> 包裹。</h5><p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">list.map(<span class="function"><span class="params">item</span> =&gt;</span> (&#123;<span class="attr">name</span>: item[<span class="number">0</span>], <span class="attr">email</span>: item[<span class="number">1</span>]&#125;));</div></pre></td></tr></table></figure>
<h5 id="强制-解构多个变量时，如果超过行长度限制，每个解构的变量必须单独一行。"><a href="#强制-解构多个变量时，如果超过行长度限制，每个解构的变量必须单独一行。" class="headerlink" title="[强制] 解构多个变量时，如果超过行长度限制，每个解构的变量必须单独一行。"></a>[强制] 解构多个变量时，如果超过行长度限制，每个解构的变量必须单独一行。</h5><p>解释：</p>
<p>太多的变量解构会让一行的代码非常长，极有可能超过单行长度控制，使代码可读性下降。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> &#123;</div><div class="line">    name: personName,</div><div class="line">    email: personEmail,</div><div class="line">    sex: personSex,</div><div class="line">    age: personAge</div><div class="line">&#125; = person;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> &#123;<span class="attr">name</span>: personName, <span class="attr">email</span>: personEmail,</div><div class="line">    sex: personSex, <span class="attr">age</span>: personAge</div><div class="line">&#125; = person;</div></pre></td></tr></table></figure>
<h2 id="3-语言特性"><a href="#3-语言特性" class="headerlink" title="3 语言特性"></a>3 语言特性</h2><h3 id="3-1-变量"><a href="#3-1-变量" class="headerlink" title="3.1 变量"></a>3.1 变量</h3><h4 id="强制-使用-let-和-const-定义变量，不使用-var。"><a href="#强制-使用-let-和-const-定义变量，不使用-var。" class="headerlink" title="[强制] 使用 let 和 const 定义变量，不使用 var。"></a>[强制] 使用 <code>let</code> 和 <code>const</code> 定义变量，不使用 <code>var</code>。</h4><p>解释：</p>
<p>使用 <code>let</code> 和 <code>const</code> 定义时，变量作用域范围更明确。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-2-解构"><a href="#3-2-解构" class="headerlink" title="3.2 解构"></a>3.2 解构</h3><h4 id="强制-不要使用3层及以上的解构。"><a href="#强制-不要使用3层及以上的解构。" class="headerlink" title="[强制] 不要使用3层及以上的解构。"></a>[强制] 不要使用3层及以上的解构。</h4><p>解释：</p>
<p>过多层次的解构会让代码变得难以阅读。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> &#123;<span class="attr">documentElement</span>: &#123;<span class="attr">firstElementChild</span>: &#123;nextSibling&#125;&#125;&#125; = <span class="built_in">window</span>;</div></pre></td></tr></table></figure>
<h4 id="建议-使用解构减少中间变量。"><a href="#建议-使用解构减少中间变量。" class="headerlink" title="[建议] 使用解构减少中间变量。"></a>[建议] 使用解构减少中间变量。</h4><p>解释：</p>
<p>常见场景如变量值交换，可能产生中间变量。这种场景推荐使用解构。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">[x, y] = [y, x];</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> temp = x;</div><div class="line">x = y;</div><div class="line">y = temp;</div></pre></td></tr></table></figure>
<h4 id="强制-仅定义一个变量时不允许使用解构。"><a href="#强制-仅定义一个变量时不允许使用解构。" class="headerlink" title="[强制] 仅定义一个变量时不允许使用解构。"></a>[强制] 仅定义一个变量时不允许使用解构。</h4><p>解释：</p>
<p>在这种场景下，使用解构将降低代码可读性。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> len = myString.length;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> &#123;<span class="attr">length</span>: len&#125; = myString;</div></pre></td></tr></table></figure>
<h4 id="强制-如果不节省编写时产生的中间变量，解构表达式-号右边不允许是-ObjectLiteral-和-ArrayLiteral。"><a href="#强制-如果不节省编写时产生的中间变量，解构表达式-号右边不允许是-ObjectLiteral-和-ArrayLiteral。" class="headerlink" title="[强制] 如果不节省编写时产生的中间变量，解构表达式 = 号右边不允许是 ObjectLiteral 和 ArrayLiteral。"></a>[强制] 如果不节省编写时产生的中间变量，解构表达式 <code>=</code> 号右边不允许是 <code>ObjectLiteral</code> 和 <code>ArrayLiteral</code>。</h4><p>解释：</p>
<p>在这种场景下，使用解构将降低代码可读性，通常也并无收益。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> &#123;<span class="attr">first</span>: firstName, <span class="attr">last</span>: lastName&#125; = person;</div><div class="line"><span class="keyword">let</span> one = <span class="number">1</span>;</div><div class="line"><span class="keyword">let</span> two = <span class="number">2</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> [one, two] = [<span class="number">1</span>, <span class="number">2</span>];</div></pre></td></tr></table></figure>
<h4 id="强制-使用剩余运算符时，剩余运算符之前的所有元素必需具名。"><a href="#强制-使用剩余运算符时，剩余运算符之前的所有元素必需具名。" class="headerlink" title="[强制] 使用剩余运算符时，剩余运算符之前的所有元素必需具名。"></a>[强制] 使用剩余运算符时，剩余运算符之前的所有元素必需具名。</h4><p>解释：</p>
<p>剩余运算符之前的元素省略名称可能带来较大的程序阅读障碍。如果仅仅为了取数组后几项，请使用 <code>slice</code> 方法。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> [one, two, ...anyOther] = myArray;</div><div class="line"><span class="keyword">let</span> other = myArray.slice(<span class="number">3</span>);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> [,,, ...other] = myArray;</div></pre></td></tr></table></figure>
<h3 id="3-3-模板字符串"><a href="#3-3-模板字符串" class="headerlink" title="3.3 模板字符串"></a>3.3 模板字符串</h3><h4 id="强制-字符串内变量替换时，不要使用-2-次及以上的函数调用。"><a href="#强制-字符串内变量替换时，不要使用-2-次及以上的函数调用。" class="headerlink" title="[强制] 字符串内变量替换时，不要使用 2 次及以上的函数调用。"></a>[强制] 字符串内变量替换时，不要使用 <code>2</code> 次及以上的函数调用。</h4><p>解释：</p>
<p>在变量替换符内有太多的函数调用等复杂语法会导致可读性下降。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> fullName = getFullName(getFirstName(), getLastName());</div><div class="line"><span class="keyword">let</span> s = <span class="string">`Hello <span class="subst">$&#123;fullName&#125;</span>`</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> s = <span class="string">`Hello <span class="subst">$&#123;getFullName(getFirstName(), getLastName())&#125;</span>`</span>;</div></pre></td></tr></table></figure>
<h3 id="3-4-函数"><a href="#3-4-函数" class="headerlink" title="3.4 函数"></a>3.4 函数</h3><h4 id="建议-使用变量默认语法代替基于条件判断的默认值声明。"><a href="#建议-使用变量默认语法代替基于条件判断的默认值声明。" class="headerlink" title="[建议] 使用变量默认语法代替基于条件判断的默认值声明。"></a>[建议] 使用变量默认语法代替基于条件判断的默认值声明。</h4><p>解释：</p>
<p>添加默认值有助于引擎的优化，在未来 <code>strong mode</code> 下也会有更好的效果。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">text = <span class="string">'hello'</span></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">    text = text || <span class="string">'hello'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="强制-不要使用-arguments-对象，应使用-args-代替。"><a href="#强制-不要使用-arguments-对象，应使用-args-代替。" class="headerlink" title="[强制] 不要使用 arguments 对象，应使用 ...args 代替。"></a>[强制] 不要使用 <code>arguments</code> 对象，应使用 <code>...args</code> 代替。</h4><p>解释：</p>
<p>在未来 <code>strong mode</code> 下 <code>arguments</code> 将被禁用。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">...args</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(args.join(<span class="string">''</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log([].join.call(<span class="built_in">arguments</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-5-箭头函数"><a href="#3-5-箭头函数" class="headerlink" title="3.5 箭头函数"></a>3.5 箭头函数</h3><h4 id="强制-一个函数被设计为需要-call-和-apply-的时候，不能是箭头函数。"><a href="#强制-一个函数被设计为需要-call-和-apply-的时候，不能是箭头函数。" class="headerlink" title="[强制] 一个函数被设计为需要 call 和 apply 的时候，不能是箭头函数。"></a>[强制] 一个函数被设计为需要 <code>call</code> 和 <code>apply</code> 的时候，不能是箭头函数。</h4><p>解释：</p>
<p>箭头函数会强制绑定当前环境下的 <code>this</code>。</p>
<h3 id="3-6-对象"><a href="#3-6-对象" class="headerlink" title="3.6 对象"></a>3.6 对象</h3><h4 id="建议-定义对象时，如果所有键均指向同名变量，则所有键都使用缩写；如果有一个键无法指向同名变量，则所有键都不使用缩写。"><a href="#建议-定义对象时，如果所有键均指向同名变量，则所有键都使用缩写；如果有一个键无法指向同名变量，则所有键都不使用缩写。" class="headerlink" title="[建议] 定义对象时，如果所有键均指向同名变量，则所有键都使用缩写；如果有一个键无法指向同名变量，则所有键都不使用缩写。"></a>[建议] 定义对象时，如果所有键均指向同名变量，则所有键都使用缩写；如果有一个键无法指向同名变量，则所有键都不使用缩写。</h4><p>解释：</p>
<p>目的在于保持所有键值对声明的一致性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> foo = &#123;x, y, z&#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> foo2 = &#123;</div><div class="line">    x: <span class="number">1</span>,</div><div class="line">    y: <span class="number">2</span>,</div><div class="line">    z: z</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> foo = &#123;</div><div class="line">    x: x,</div><div class="line">    y: y,</div><div class="line">    z: z</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> foo2 = &#123;</div><div class="line">    x: <span class="number">1</span>,</div><div class="line">    y: <span class="number">2</span>,</div><div class="line">    z</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="强制-定义方法时使用-MethodDefinition-语法，不使用-PropertyName-FunctionExpression-语法。"><a href="#强制-定义方法时使用-MethodDefinition-语法，不使用-PropertyName-FunctionExpression-语法。" class="headerlink" title="[强制] 定义方法时使用 MethodDefinition 语法，不使用 PropertyName: FunctionExpression 语法。"></a>[强制] 定义方法时使用 <code>MethodDefinition</code> 语法，不使用 <code>PropertyName: FunctionExpression</code> 语法。</h4><p>解释：</p>
<p><code>MethodDefinition</code> 语法更清晰简洁。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> foo = &#123;</div><div class="line">    bar(x, y) &#123;</div><div class="line">        <span class="keyword">return</span> x + y;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> foo = &#123;</div><div class="line">    bar: <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> x + y;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="建议-使用-Object-keys-或-Object-entries-进行对象遍历。"><a href="#建议-使用-Object-keys-或-Object-entries-进行对象遍历。" class="headerlink" title="[建议] 使用 Object.keys 或 Object.entries 进行对象遍历。"></a>[建议] 使用 <code>Object.keys</code> 或 <code>Object.entries</code> 进行对象遍历。</h4><p>解释：</p>
<p>不建议使用 <code>for .. in</code> 进行对象的遍历，以避免遗漏 <code>hasOwnProperty</code> 产生的错误。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(foo)) &#123;</div><div class="line">    <span class="keyword">let</span> value = foo[key];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(foo)) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="建议-定义对象的方法不应使用箭头函数。"><a href="#建议-定义对象的方法不应使用箭头函数。" class="headerlink" title="[建议] 定义对象的方法不应使用箭头函数。"></a>[建议] 定义对象的方法不应使用箭头函数。</h4><p>解释：</p>
<p>箭头函数将 <code>this</code> 绑定到当前环境，在 <code>obj.method()</code> 调用时容易导致不期待的 <code>this</code>。除非明确需要绑定 <code>this</code>，否则不应使用箭头函数。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> foo = &#123;</div><div class="line">    bar(x, y) &#123;</div><div class="line">        <span class="keyword">return</span> x + y;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> foo = &#123;</div><div class="line">    bar: <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="建议-尽量使用计算属性键在一个完整的字面量中完整地定义一个对象，避免对象定义后直接增加对象属性。"><a href="#建议-尽量使用计算属性键在一个完整的字面量中完整地定义一个对象，避免对象定义后直接增加对象属性。" class="headerlink" title="[建议] 尽量使用计算属性键在一个完整的字面量中完整地定义一个对象，避免对象定义后直接增加对象属性。"></a>[建议] 尽量使用计算属性键在一个完整的字面量中完整地定义一个对象，避免对象定义后直接增加对象属性。</h4><p>解释：</p>
<p>在一个完整的字面量中声明所有的键值，而不需要将代码分散开来，有助于提升代码可读性。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> MY_KEY = <span class="string">'bar'</span>;</div><div class="line"><span class="keyword">let</span> foo = &#123;</div><div class="line">    [MY_KEY + <span class="string">'Hash'</span>]: <span class="number">123</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> MY_KEY = <span class="string">'bar'</span>;</div><div class="line"><span class="keyword">let</span> foo = &#123;&#125;;</div><div class="line">foo[MY_KEY + <span class="string">'Hash'</span>] = <span class="number">123</span>;</div></pre></td></tr></table></figure>
<h3 id="3-7-类"><a href="#3-7-类" class="headerlink" title="3.7 类"></a>3.7 类</h3><h4 id="强制-使用-class-关键字定义一个类。"><a href="#强制-使用-class-关键字定义一个类。" class="headerlink" title="[强制] 使用 class 关键字定义一个类。"></a>[强制] 使用 <code>class</code> 关键字定义一个类。</h4><p>解释：</p>
<p>直接使用 <code>class</code> 定义类更清晰。不要再使用 <code>function</code> 和 <code>prototype</code> 形式的定义。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextNode</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(value, engine) &#123;</div><div class="line">        <span class="keyword">this</span>.value = value;</div><div class="line">        <span class="keyword">this</span>.engine = engine;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    clone() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextNode</span>(<span class="params">value, engine</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.value = value;</div><div class="line">    <span class="keyword">this</span>.engine = engine;</div><div class="line">&#125;</div><div class="line"></div><div class="line">TextNode.prototype.clone = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="强制-使用-super-访问父类成员，而非父类的-prototype。"><a href="#强制-使用-super-访问父类成员，而非父类的-prototype。" class="headerlink" title="[强制] 使用 super 访问父类成员，而非父类的 prototype。"></a>[强制] 使用 <code>super</code> 访问父类成员，而非父类的 <code>prototype</code>。</h4><p>解释：</p>
<p>使用 <code>super</code> 和 <code>super.foo</code> 可以快速访问父类成员，而不必硬编码父类模块而导致修改和维护的不便，同时更节省代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextNode</span> <span class="keyword">extends</span> <span class="title">Node</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(value, engine) &#123;</div><div class="line">        <span class="keyword">super</span>(value);</div><div class="line">        <span class="keyword">this</span>.engine = engine;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setNodeValue(value) &#123;</div><div class="line">        <span class="keyword">super</span>.setNodeValue(value);</div><div class="line">        <span class="keyword">this</span>.textContent = value;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextNode</span> <span class="keyword">extends</span> <span class="title">Node</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(value, engine) &#123;</div><div class="line">        Node.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">        <span class="keyword">this</span>.engine = engine;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    setNodeValue(value) &#123;</div><div class="line">        Node.prototype.setNodeValue.call(<span class="keyword">this</span>, value);</div><div class="line">        <span class="keyword">this</span>.textContent = value;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-8-模块"><a href="#3-8-模块" class="headerlink" title="3.8 模块"></a>3.8 模块</h3><h4 id="强制-export-与内容定义放在一起。"><a href="#强制-export-与内容定义放在一起。" class="headerlink" title="[强制] export 与内容定义放在一起。"></a>[强制] <code>export</code> 与内容定义放在一起。</h4><p>解释：</p>
<p>何处声明要导出的东西，就在何处使用 <code>export</code> 关键字，不在声明后再统一导出。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> bar = <span class="number">3</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> bar = <span class="number">3</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> &#123;foo&#125;;</div><div class="line"><span class="keyword">export</span> &#123;bar&#125;;</div></pre></td></tr></table></figure>
<h4 id="建议-相互之间无关联的内容使用命名导出。"><a href="#建议-相互之间无关联的内容使用命名导出。" class="headerlink" title="[建议] 相互之间无关联的内容使用命名导出。"></a>[建议] 相互之间无关联的内容使用命名导出。</h4><p>解释：</p>
<p>举个例子，工具对象中的各个方法，相互之间并没有强关联，通常外部会选择几个使用，则应该使用命名导出。</p>
<p>简而言之，当一个模块只扮演命名空间的作用时，使用命名导出。</p>
<h4 id="强制-所有-import-语句写在模块开始处。"><a href="#强制-所有-import-语句写在模块开始处。" class="headerlink" title="[强制] 所有 import 语句写在模块开始处。"></a>[强制] 所有 <code>import</code> 语句写在模块开始处。</h4><p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> &#123;bar&#125; <span class="keyword">from</span> <span class="string">'./bar'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    bar.work();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">import</span> &#123;bar&#125; <span class="keyword">from</span> <span class="string">'./bar'</span>;</div><div class="line">    bar.work();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-9-集合"><a href="#3-9-集合" class="headerlink" title="3.9 集合"></a>3.9 集合</h3><h4 id="建议-对数组进行连接操作时，使用数组展开语法。"><a href="#建议-对数组进行连接操作时，使用数组展开语法。" class="headerlink" title="[建议] 对数组进行连接操作时，使用数组展开语法。"></a>[建议] 对数组进行连接操作时，使用数组展开语法。</h4><p>解释：</p>
<p>用数组展开代替 <code>concat</code> 方法，数组展开对 <code>Iterable</code> 有更好的兼容性。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> foo = [...foo, newValue];</div><div class="line"><span class="keyword">let</span> bar = [...bar, ...newValues];</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> foo = foo.concat(newValue);</div><div class="line"><span class="keyword">let</span> bar = bar.concat(newValues);</div></pre></td></tr></table></figure>
<h4 id="建议-不要使用数组展开进行数组的复制操作。"><a href="#建议-不要使用数组展开进行数组的复制操作。" class="headerlink" title="[建议] 不要使用数组展开进行数组的复制操作。"></a>[建议] 不要使用数组展开进行数组的复制操作。</h4><p>解释：</p>
<p>使用数组展开语法进行复制，代码可读性较差。推荐使用 <code>Array.from</code> 方法进行复制操作。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> otherArr = <span class="built_in">Array</span>.from(arr);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> otherArr = [...arr];</div></pre></td></tr></table></figure>
<h4 id="建议-尽可能使用-for-of-进行遍历。"><a href="#建议-尽可能使用-for-of-进行遍历。" class="headerlink" title="[建议] 尽可能使用 for .. of 进行遍历。"></a>[建议] 尽可能使用 <code>for .. of</code> 进行遍历。</h4><p>解释：</p>
<p>使用 <code>for .. of</code> 可以更好地接受任何的 <code>Iterable</code> 对象，如 <code>Map#values</code> 生成的迭代器，使得方法的通用性更强。</p>
<p>以下情况除外：</p>
<ol>
<li>遍历确实成为了性能瓶颈，需要使用原生 <code>for</code> 循环提升性能。</li>
<li>需要遍历过程中的索引。</li>
</ol>
<h4 id="强制-当键值有可能不是字符串时，必须使用-Map；当元素有可能不是字符串时，必须使用-Set。"><a href="#强制-当键值有可能不是字符串时，必须使用-Map；当元素有可能不是字符串时，必须使用-Set。" class="headerlink" title="[强制] 当键值有可能不是字符串时，必须使用 Map；当元素有可能不是字符串时，必须使用 Set。"></a>[强制] 当键值有可能不是字符串时，必须使用 <code>Map</code>；当元素有可能不是字符串时，必须使用 <code>Set</code>。</h4><p>解释：</p>
<p>使用普通 Object，对非字符串类型的 <code>key</code>，需要自己实现序列化。并且运行过程中的对象变化难以通知 Object。</p>
<h4 id="建议-需要一个不可重复的集合时，应使用-Set。"><a href="#建议-需要一个不可重复的集合时，应使用-Set。" class="headerlink" title="[建议] 需要一个不可重复的集合时，应使用 Set。"></a>[建议] 需要一个不可重复的集合时，应使用 <code>Set</code>。</h4><p>解释：</p>
<p>不要使用 <code>{foo: true}</code> 这样的普通 <code>Object</code>。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> members = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>]);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> members = &#123;</div><div class="line">    one: <span class="literal">true</span>,</div><div class="line">    two: <span class="literal">true</span>,</div><div class="line">    three: <span class="literal">true</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="建议-当需要遍历功能时，使用-Map-和-Set。"><a href="#建议-当需要遍历功能时，使用-Map-和-Set。" class="headerlink" title="[建议] 当需要遍历功能时，使用 Map 和 Set。"></a>[建议] 当需要遍历功能时，使用 <code>Map</code> 和 <code>Set</code>。</h4><p>解释：</p>
<p><code>Map</code> 和 <code>Set</code> 是可遍历对象，能够方便地使用 <code>for...of</code> 遍历。不要使用使用普通 Object。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> membersAge = <span class="keyword">new</span> <span class="built_in">Map</span>([</div><div class="line">    [<span class="string">'one'</span>, <span class="number">10</span>],</div><div class="line">    [<span class="string">'two'</span>, <span class="number">20</span>],</div><div class="line">    [<span class="string">'three'</span>, <span class="number">30</span>]</div><div class="line">]);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> membersAge = &#123;</div><div class="line">    one: <span class="number">10</span>,</div><div class="line">    two: <span class="number">20</span>,</div><div class="line">    three: <span class="number">30</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> membersAge) &#123;</div><div class="line">    <span class="keyword">if</span> (membersAge.hasOwnProperty(key)) &#123;</div><div class="line">        <span class="keyword">let</span> value = membersAge[key];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="建议-程序运行过程中有添加或移除元素的操作时，使用-Map-和-Set。"><a href="#建议-程序运行过程中有添加或移除元素的操作时，使用-Map-和-Set。" class="headerlink" title="[建议] 程序运行过程中有添加或移除元素的操作时，使用 Map 和 Set。"></a>[建议] 程序运行过程中有添加或移除元素的操作时，使用 <code>Map</code> 和 <code>Set</code>。</h4><p>解释：</p>
<p>使用 <code>Map</code> 和 <code>Set</code>，程序的可理解性更好；普通 Object 的语义更倾向于表达固定的结构。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> membersAge = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line">membersAge.set(<span class="string">'one'</span>, <span class="number">10</span>);</div><div class="line">membersAge.set(<span class="string">'two'</span>, <span class="number">20</span>);</div><div class="line">membersAge.set(<span class="string">'three'</span>, <span class="number">30</span>);</div><div class="line">membersAge.delete(<span class="string">'one'</span>);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> membersAge = &#123;&#125;;</div><div class="line">membersAge.one = <span class="number">10</span>;</div><div class="line">membersAge.two = <span class="number">20</span>;</div><div class="line">membersAge.three = <span class="number">30</span>;</div><div class="line"><span class="keyword">delete</span> membersAge[<span class="string">'one'</span>];</div></pre></td></tr></table></figure>
<h3 id="3-10-异步"><a href="#3-10-异步" class="headerlink" title="3.10 异步"></a>3.10 异步</h3><h4 id="强制-回调函数的嵌套不得超过3层。"><a href="#强制-回调函数的嵌套不得超过3层。" class="headerlink" title="[强制] 回调函数的嵌套不得超过3层。"></a>[强制] 回调函数的嵌套不得超过3层。</h4><p>解释：</p>
<p>深层次的回调函数的嵌套会让代码变得难以阅读。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">getUser(userId, <span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line">    validateUser(user, <span class="function"><span class="keyword">function</span> (<span class="params">isValid</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (isValid) &#123;</div><div class="line">            saveReport(report, user, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                notice(<span class="string">'Saved!'</span>);</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="建议-使用-Promise-代替-callback。"><a href="#建议-使用-Promise-代替-callback。" class="headerlink" title="[建议] 使用 Promise 代替 callback。"></a>[建议] 使用 <code>Promise</code> 代替 <code>callback</code>。</h4><p>解释：</p>
<p>相比 <code>callback</code>，使用 <code>Promise</code> 能够使复杂异步过程的代码更清晰。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> user;</div><div class="line">getUser(userId)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">userObj</span>) </span>&#123;</div><div class="line">        user = userObj;</div><div class="line">        <span class="keyword">return</span> validateUser(user);</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">isValid</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (isValid) &#123;</div><div class="line">            <span class="keyword">return</span> saveReport(report, user);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'Invalid!'</span>);</div><div class="line">    &#125;)</div><div class="line">    .then(</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            notice(<span class="string">'Saved!'</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</div><div class="line">            notice(message);</div><div class="line">        &#125;</div><div class="line">    );</div></pre></td></tr></table></figure>
<h4 id="强制-使用标准的-Promise-API。"><a href="#强制-使用标准的-Promise-API。" class="headerlink" title="[强制] 使用标准的 Promise API。"></a>[强制] 使用标准的 <code>Promise</code> API。</h4><p>解释：</p>
<ol>
<li>不允许使用非标准的 <code>Promise</code> API，如 <code>jQuery</code> 的 <code>Deferred</code>、<code>Q.js</code> 的 <code>defer</code> 等。</li>
<li>不允许使用非标准的 <code>Promise</code> 扩展 API，如 <code>bluebird</code> 的 <code>Promise.any</code> 等。</li>
</ol>
<p>使用标准的 <code>Promise</code> API，当运行环境都支持时，可以把 Promise Lib 直接去掉。</p>
<h4 id="强制-不允许直接扩展-Promise-对象的-prototype。"><a href="#强制-不允许直接扩展-Promise-对象的-prototype。" class="headerlink" title="[强制] 不允许直接扩展 Promise 对象的 prototype。"></a>[强制] 不允许直接扩展 <code>Promise</code> 对象的 <code>prototype</code>。</h4><p>解释：</p>
<p>理由和 <strong>不允许修改和扩展任何原生对象和宿主对象的原型</strong> 是一样的。如果想要使用更方便，可以用 utility 函数的形式。</p>
<h4 id="强制-不得为了编写的方便，将可以并行的IO过程串行化。"><a href="#强制-不得为了编写的方便，将可以并行的IO过程串行化。" class="headerlink" title="[强制] 不得为了编写的方便，将可以并行的IO过程串行化。"></a>[强制] 不得为了编写的方便，将可以并行的IO过程串行化。</h4><p>解释：</p>
<p>并行 IO 消耗时间约等于 IO 时间最大的那个过程，串行的话消耗时间将是所有过程的时间之和。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">requestData().then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">    renderTags(data.tags);</div><div class="line">    renderArticles(data.articles);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">requestData</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> [tags, articles] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([</div><div class="line">        requestTags(),</div><div class="line">        requestArticles()</div><div class="line">    ]);</div><div class="line">    <span class="keyword">return</span> &#123;tags, articles&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">requestData</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> tags = <span class="keyword">await</span> requestTags();</div><div class="line">    <span class="keyword">let</span> articles = <span class="keyword">await</span> requestArticles();</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123;tags, articles&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="建议-使用-async-await-代替-generator-co。"><a href="#建议-使用-async-await-代替-generator-co。" class="headerlink" title="[建议] 使用 async/await 代替 generator + co。"></a>[建议] 使用 <code>async/await</code> 代替 <code>generator</code> + <code>co</code>。</h4><p>解释：</p>
<p>使用语言自身的能力可以使代码更清晰，也无需引入 <code>co</code> 库。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">addReport(report, userId).then(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        notice(<span class="string">'Saved!'</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</div><div class="line">        notice(message);</div><div class="line">    &#125;</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">addReport</span>(<span class="params">report, userId</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> user = <span class="keyword">await</span> getUser(userId);</div><div class="line">    <span class="keyword">let</span> isValid = <span class="keyword">await</span> validateUser(user);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (isValid) &#123;</div><div class="line">        <span class="keyword">let</span> savePromise = saveReport(report, user);</div><div class="line">        <span class="keyword">return</span> savePromise();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'Invalid'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addReport</span>(<span class="params">report, userId</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> co(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">let</span> user = <span class="keyword">yield</span> getUser(userId);</div><div class="line">        <span class="keyword">let</span> isValid = <span class="keyword">yield</span> validateUser(user);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (isValid) &#123;</div><div class="line">            <span class="keyword">let</span> savePromise = saveReport(report, user);</div><div class="line">            <span class="keyword">return</span> savePromise();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'Invalid'</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-环境"><a href="#4-环境" class="headerlink" title="4 环境"></a>4 环境</h2><h3 id="4-1-运行环境"><a href="#4-1-运行环境" class="headerlink" title="4.1 运行环境"></a>4.1 运行环境</h3><h4 id="建议-持续跟进与关注运行环境对语言特性的支持程度。"><a href="#建议-持续跟进与关注运行环境对语言特性的支持程度。" class="headerlink" title="[建议] 持续跟进与关注运行环境对语言特性的支持程度。"></a>[建议] 持续跟进与关注运行环境对语言特性的支持程度。</h4><p>解释：</p>
<p><a href="https://kangax.github.io/compat-table/es6/" target="_blank" rel="external">查看环境对语言特性的支持程度</a></p>
<p>ES 标准的制定还在不断进行中，各种环境对语言特性的支持也日新月异。了解项目中用到了哪些 ESNext 的特性，了解项目的运行环境，并持续跟进这些特性在运行环境中的支持程度是很有必要的。这意味着：</p>
<ol>
<li>如果有任何一个运行环境（比如 chrome）支持了项目里用到的所有特性，你可以在开发时抛弃预编译。</li>
<li>如果所有环境都支持了某一特性（比如 Promise），你可以抛弃相关的 shim，或无需在预编译时进行转换。</li>
<li>如果所有环境都支持了项目里用到的所有特性，你可以完全抛弃预编译。</li>
</ol>
<p>无论如何，在选择预编译工具时，你都需要清晰的知道你现阶段将在项目里使用哪些语言特性，然后了解预编译工具对语言特性的支持程度，做出选择。</p>
<h4 id="强制-在运行环境中没有-Promise-时，将-Promise-的实现-shim-到-global-中。"><a href="#强制-在运行环境中没有-Promise-时，将-Promise-的实现-shim-到-global-中。" class="headerlink" title="[强制] 在运行环境中没有 Promise 时，将 Promise 的实现 shim 到 global 中。"></a>[强制] 在运行环境中没有 <code>Promise</code> 时，将 <code>Promise</code> 的实现 <code>shim</code> 到 <code>global</code> 中。</h4><p>解释：</p>
<p>当前运行环境下没有 <code>Promise</code> 时，可以引入 <code>shim</code> 的扩展。如果自己实现，需要实现在 <code>global</code> 下，并且与标准 API 保持一致。</p>
<p>这样，未来运行环境支持时，可以随时把 <code>Promise</code> 扩展直接扔掉，而应用代码无需任何修改。</p>
<h3 id="4-2-预编译"><a href="#4-2-预编译" class="headerlink" title="4.2 预编译"></a>4.2 预编译</h3><h4 id="建议-使用-babel-做为预编译工具时，建议使用-5-x-版本。"><a href="#建议-使用-babel-做为预编译工具时，建议使用-5-x-版本。" class="headerlink" title="[建议] 使用 babel 做为预编译工具时，建议使用 5.x 版本。"></a>[建议] 使用 <code>babel</code> 做为预编译工具时，建议使用 <code>5.x</code> 版本。</h4><p>解释：</p>
<p>由于 <code>babel</code> 最新的 <code>6</code> 暂时还不稳定，建议暂时使用 <code>5.x</code>。不同的产品，对于浏览器支持的情况不同，使用 <code>babel</code> 的时候，需要设置的参数也有一些区别。下面在示例中给出一些建议的参数。</p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">＃ 建议的参数</div><div class="line">--loose all --modules amd --blacklist strict</div><div class="line"></div><div class="line">＃ 如果需要使用 es7.classProperties、es7.decorators 等一些特性，需要额外的 --stage 0 参数</div><div class="line">--loose all --modules amd --blacklist strict --stage 0</div></pre></td></tr></table></figure>
<h4 id="建议-使用-babel-做为预编译工具时，通过-external-helpers-减少生成文件的大小。"><a href="#建议-使用-babel-做为预编译工具时，通过-external-helpers-减少生成文件的大小。" class="headerlink" title="[建议] 使用 babel 做为预编译工具时，通过 external-helpers 减少生成文件的大小。"></a>[建议] 使用 <code>babel</code> 做为预编译工具时，通过 <code>external-helpers</code> 减少生成文件的大小。</h4><p>解释：</p>
<p>当 <code>babel</code> 在转换代码的过程中发现需要一些特性时，会在该文件头部生成对应的 <code>helper</code> 代码。默认情况下，对于每一个经由 <code>babel</code> 处理的文件，均会在文件头部生成对应需要的辅助函数，多份文件辅助函数存在重复，占用了不必要的代码体积。</p>
<p>因此推荐打开<code>externalHelpers: true</code>选项，使 <code>babel</code> 在转换后内容中不写入 <code>helper</code> 相关的代码，而是使用一个外部的 <code>.js</code>统一提供所有的 <code>helper</code>。对于<a href="https://github.com/babel/babel.github.io/blob/5.0.0/docs/usage/external-helpers.md" target="_blank" rel="external">external-helpers</a>的使用，可以有两种方式：</p>
<ol>
<li>默认方式：需要通过 <code>&lt;script&gt;</code> 自行引入<code>babel-polyfill.js</code> 和 <code>babel-external-helpers.js</code>。</li>
<li>定制方式：自己实现 <a href="https://github.com/babel/babel.github.io/blob/5.0.0/docs/usage/runtime.md" target="_blank" rel="external">babel-runtime</a>。</li>
</ol>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 默认方式</div><div class="line">--loose all --modules amd --external-helpers</div><div class="line"><span class="meta">#</span> `babelHelpers` 的代码可以通过执行 `babel-external-helpers -t var` 得到所有相关API的实现</div><div class="line"></div><div class="line"><span class="meta">#</span> 定制方式</div><div class="line">--loose all --modules amd --optional runtime</div></pre></td></tr></table></figure>
<h4 id="建议-使用-TypeScript-做为预编译工具时，建议使用-1-6-版本。"><a href="#建议-使用-TypeScript-做为预编译工具时，建议使用-1-6-版本。" class="headerlink" title="[建议] 使用 TypeScript 做为预编译工具时，建议使用 1.6+ 版本。"></a>[建议] 使用 <code>TypeScript</code> 做为预编译工具时，建议使用 <code>1.6+</code> 版本。</h4><p>解释：</p>
<p><code>TypeScript</code> 1.6 之后，基本摒弃了之前的与 ESNext 相冲突的地方。目前 <code>TypeScript</code> 的思路就是遵循标准，将 stage 已经足够成熟的功能纳入，并提供静态类型和类型检查，所以其在 stage 0/1 的支持上不如 <code>babel</code>。另外，<code>TypeScript</code> 不能指定关闭某个 transform，但其编译速度比 <code>babel</code> 更高。</p>
<p><code>TypeScript</code> 的常用参数在下面给出了示例。</p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">--module amd --target ES3</div><div class="line">--module commonjs --target ES6</div></pre></td></tr></table></figure>
<h4 id="建议-使用-TypeScript-做为预编译工具时，不使用-tsc-命令。"><a href="#建议-使用-TypeScript-做为预编译工具时，不使用-tsc-命令。" class="headerlink" title="[建议] 使用 TypeScript 做为预编译工具时，不使用 tsc 命令。"></a>[建议] 使用 <code>TypeScript</code> 做为预编译工具时，不使用 <code>tsc</code> 命令。</h4><p>解释：</p>
<p><code>TypeScript</code> 提供的 <code>tsc</code> 命令只支持后缀名 <code>.ts</code>、<code>.tsx</code>、<code>.d.ts</code> 的文件编译，对于 JavaScript 来说，保持后缀名为 <code>.js</code> 是原则，本文档的 <code>文件</code> 章节也有所要求。</p>
<p>如果要使用 <code>TypeScript</code> 做为预编译工具，可基于其 <a href="https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API" target="_blank" rel="external">Compiler API</a> 开发自己的预编译工具。如果你是 FIS 用户，可以使用 <a href="https://github.com/fex-team/fis3-parser-typescript" target="_blank" rel="external">FIS TypeScript 插件</a>。</p>
<h4 id="建议-生成的代码在浏览器环境运行时，应生成-AMD-模块化代码。"><a href="#建议-生成的代码在浏览器环境运行时，应生成-AMD-模块化代码。" class="headerlink" title="[建议] 生成的代码在浏览器环境运行时，应生成 AMD 模块化代码。"></a>[建议] 生成的代码在浏览器环境运行时，应生成 AMD 模块化代码。</h4><p>解释：</p>
<p>AMD 在浏览器环境应用较为成熟。</p>
<h4 id="建议-浏览器端项目中如果-ESNext-代码和-ES3-5-代码混合，不要使用-TypeScript-做为预编译工具。"><a href="#建议-浏览器端项目中如果-ESNext-代码和-ES3-5-代码混合，不要使用-TypeScript-做为预编译工具。" class="headerlink" title="[建议] 浏览器端项目中如果 ESNext 代码和 ES3/5 代码混合，不要使用 TypeScript 做为预编译工具。"></a>[建议] 浏览器端项目中如果 ESNext 代码和 ES3/5 代码混合，不要使用 <code>TypeScript</code> 做为预编译工具。</h4><p>解释：</p>
<p><code>TypeScript</code> 产生的 module 代码使用 exports.default 导出默认的 export，但是没有直接为 module.exports 赋值，导致在另外一个普通文件中使用 require(‘moduleName’) 是拿不到东西的。</p>
<p>需要使用 <code>TypeScript</code> 的话，建议整个项目所有文件都是 ESNext module 的，采用混合的 module 容易出现不可预期的结果。</p>
<h4 id="建议-AMD-CommonJS-模块依赖-ESNext-模块时，AMD-CommonJS-模块对-default-export-的-require-需要改造。"><a href="#建议-AMD-CommonJS-模块依赖-ESNext-模块时，AMD-CommonJS-模块对-default-export-的-require-需要改造。" class="headerlink" title="[建议] AMD/CommonJS 模块依赖 ESNext 模块时，AMD/CommonJS 模块对 default export 的 require 需要改造。"></a>[建议] AMD/CommonJS 模块依赖 ESNext 模块时，AMD/CommonJS 模块对 default export 的 require 需要改造。</h4><p>解释：</p>
<p>ESNext 模块经过编译后，named export 会挂载在 exports 对象上，default export 也会挂载在 exports 对象上名称为 default 的属性。同时 exports 对象会包含一个值为 true 的 __esModule 属性。那么问题来了，当 AMD/CommonJS 模块依赖了 ESNext 模块时，require 期望拿到的是 exports.default，但你实际上拿到的是 exports。</p>
<p>所以，老的 AMD/CommonJS 模块依赖了 default export 的 ESNext 模块时，对 default export 的 require 需要改造成 <code>require(&#39;name&#39;).default</code>。</p>
<p>另外，如果是 ESNext 模块之间的互相依赖，transpiler 会通过加入中间对象和引入 interop 方法，所以不会产生这个问题。</p>

      
    </div>
    
    
    
    
    
        <div>
            <div>
    

        <blockquote class="blockquote-center">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>
        <div style="text-align:center;font-family: 'Lato', 'PingFang SC', 'Microsoft YaHei', sans-serif;color: #555;font-size:14px;">-----------本文结束<i class="fa fa-map-pin"></i>感谢您的阅读----------</div>
    
</div>
        </div>
    
   
    
        <div>
            
<div class="my_post_copyright">
  <!-- JS库 sweetalert 可修改路径 -->
  <p><span>本文标题:</span><a href="/2017/08/23/JS书写规范/es-next-style-guide/">JavaScript 编码规范 - ESNext 补充篇（草案）</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 Chelsia 的个人博客">Chelsia</a></p>
  <p><span>发布时间:</span>2017年08月23日 - 22:08</p>
  <p><span>最后更新:</span>2017年08月27日 - 10:08</p>
  <p><span>原始链接:</span><a href="/2017/08/23/JS书写规范/es-next-style-guide/" title="JavaScript 编码规范 - ESNext 补充篇（草案）">https://www.hqxdb.com/2017/08/23/JS书写规范/es-next-style-guide/</a>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>


        </div>
    
  

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>您的支持是我最大的动力︿(￣︶￣)︿</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span style="border-radius:50%; line-height:50px; width:50px;height:50px;" >赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.png" alt="Chelsia WeChat Pay"/>
        <p>WeChat Pay(微信)</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="Chelsia Alipay"/>
        <p>Alipay(支付宝)</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a>
          
            <a href="/tags/编码规范/" rel="tag"><i class="fa fa-tag"></i> 编码规范</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/08/23/JS书写规范/react-style-guide/" rel="next" title="React规范">
                <i class="fa fa-chevron-left"></i> React规范
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a>
    <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
    <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a class="bds_count" data-cmd="count"></a>
  </div>
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "2",
        "bdMiniList": false,
        "bdPic": ""
      },
      "share": {
        "bdSize": "16",
        "bdStyle": "0"
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMDI4My82ODM4"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/logo.png"
               alt="Chelsia" />
          <p class="site-author-name" itemprop="name">Chelsia</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/nodego" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://hqxdb.com/" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-前言"><span class="nav-number">1.</span> <span class="nav-text">1 前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-代码风格"><span class="nav-number">2.</span> <span class="nav-text">2 代码风格</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-文件"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 文件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#建议-ESNext-语法的-JavaScript-文件使用-js-扩展名。"><span class="nav-number">2.1.0.1.</span> <span class="nav-text">[建议] ESNext 语法的 JavaScript 文件使用 .js 扩展名。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-当文件无法使用-js-扩展名时，使用-es-扩展名。"><span class="nav-number">2.1.0.2.</span> <span class="nav-text">[强制] 当文件无法使用 .js 扩展名时，使用 .es 扩展名。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-结构"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-缩进"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.1 缩进</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#建议-使用多行模板字符串时遵循缩进原则。当空行与空白字符敏感时，不使用多行模板字符串。"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">[建议] 使用多行模板字符串时遵循缩进原则。当空行与空白字符敏感时，不使用多行模板字符串。</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2-空格"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.2 空格</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-使用-generator-时，-前面不允许有空格，-后面必须有一个空格。"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">[强制] 使用 generator 时，* 前面不允许有空格，* 后面必须有一个空格。</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-3-语句"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.2.3 语句</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-类声明结束不允许添加分号。"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">[强制] 类声明结束不允许添加分号。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-类成员定义中，方法定义后不允许添加分号，成员属性定义后必须添加分号。"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">[强制] 类成员定义中，方法定义后不允许添加分号，成员属性定义后必须添加分号。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-export-语句后，不允许出现表示空语句的分号。"><span class="nav-number">2.2.3.3.</span> <span class="nav-text">[强制] export 语句后，不允许出现表示空语句的分号。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-属性装饰器后，可以不加分号的场景，不允许加分号。"><span class="nav-number">2.2.3.4.</span> <span class="nav-text">[强制] 属性装饰器后，可以不加分号的场景，不允许加分号。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-箭头函数的参数只有一个，并且不包含解构时，参数部分的括号必须省略。"><span class="nav-number">2.2.3.5.</span> <span class="nav-text">[强制] 箭头函数的参数只有一个，并且不包含解构时，参数部分的括号必须省略。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#建议-箭头函数的函数体只有一个单行表达式语句，且作为返回值时，省略-和-return。"><span class="nav-number">2.2.3.6.</span> <span class="nav-text">[建议] 箭头函数的函数体只有一个单行表达式语句，且作为返回值时，省略 {} 和 return。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#建议-箭头函数的函数体只有一个-Object-Literal，且作为返回值时，使用-包裹。"><span class="nav-number">2.2.3.7.</span> <span class="nav-text">[建议] 箭头函数的函数体只有一个 Object Literal，且作为返回值时，使用 () 包裹。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制-解构多个变量时，如果超过行长度限制，每个解构的变量必须单独一行。"><span class="nav-number">2.2.3.8.</span> <span class="nav-text">[强制] 解构多个变量时，如果超过行长度限制，每个解构的变量必须单独一行。</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-语言特性"><span class="nav-number">3.</span> <span class="nav-text">3 语言特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-变量"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-使用-let-和-const-定义变量，不使用-var。"><span class="nav-number">3.1.1.</span> <span class="nav-text">[强制] 使用 let 和 const 定义变量，不使用 var。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-解构"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 解构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-不要使用3层及以上的解构。"><span class="nav-number">3.2.1.</span> <span class="nav-text">[强制] 不要使用3层及以上的解构。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用解构减少中间变量。"><span class="nav-number">3.2.2.</span> <span class="nav-text">[建议] 使用解构减少中间变量。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-仅定义一个变量时不允许使用解构。"><span class="nav-number">3.2.3.</span> <span class="nav-text">[强制] 仅定义一个变量时不允许使用解构。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-如果不节省编写时产生的中间变量，解构表达式-号右边不允许是-ObjectLiteral-和-ArrayLiteral。"><span class="nav-number">3.2.4.</span> <span class="nav-text">[强制] 如果不节省编写时产生的中间变量，解构表达式 = 号右边不允许是 ObjectLiteral 和 ArrayLiteral。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-使用剩余运算符时，剩余运算符之前的所有元素必需具名。"><span class="nav-number">3.2.5.</span> <span class="nav-text">[强制] 使用剩余运算符时，剩余运算符之前的所有元素必需具名。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-模板字符串"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 模板字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-字符串内变量替换时，不要使用-2-次及以上的函数调用。"><span class="nav-number">3.3.1.</span> <span class="nav-text">[强制] 字符串内变量替换时，不要使用 2 次及以上的函数调用。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-函数"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用变量默认语法代替基于条件判断的默认值声明。"><span class="nav-number">3.4.1.</span> <span class="nav-text">[建议] 使用变量默认语法代替基于条件判断的默认值声明。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-不要使用-arguments-对象，应使用-args-代替。"><span class="nav-number">3.4.2.</span> <span class="nav-text">[强制] 不要使用 arguments 对象，应使用 ...args 代替。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-箭头函数"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 箭头函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-一个函数被设计为需要-call-和-apply-的时候，不能是箭头函数。"><span class="nav-number">3.5.1.</span> <span class="nav-text">[强制] 一个函数被设计为需要 call 和 apply 的时候，不能是箭头函数。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-对象"><span class="nav-number">3.6.</span> <span class="nav-text">3.6 对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-定义对象时，如果所有键均指向同名变量，则所有键都使用缩写；如果有一个键无法指向同名变量，则所有键都不使用缩写。"><span class="nav-number">3.6.1.</span> <span class="nav-text">[建议] 定义对象时，如果所有键均指向同名变量，则所有键都使用缩写；如果有一个键无法指向同名变量，则所有键都不使用缩写。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-定义方法时使用-MethodDefinition-语法，不使用-PropertyName-FunctionExpression-语法。"><span class="nav-number">3.6.2.</span> <span class="nav-text">[强制] 定义方法时使用 MethodDefinition 语法，不使用 PropertyName: FunctionExpression 语法。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-Object-keys-或-Object-entries-进行对象遍历。"><span class="nav-number">3.6.3.</span> <span class="nav-text">[建议] 使用 Object.keys 或 Object.entries 进行对象遍历。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-定义对象的方法不应使用箭头函数。"><span class="nav-number">3.6.4.</span> <span class="nav-text">[建议] 定义对象的方法不应使用箭头函数。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-尽量使用计算属性键在一个完整的字面量中完整地定义一个对象，避免对象定义后直接增加对象属性。"><span class="nav-number">3.6.5.</span> <span class="nav-text">[建议] 尽量使用计算属性键在一个完整的字面量中完整地定义一个对象，避免对象定义后直接增加对象属性。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-类"><span class="nav-number">3.7.</span> <span class="nav-text">3.7 类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-使用-class-关键字定义一个类。"><span class="nav-number">3.7.1.</span> <span class="nav-text">[强制] 使用 class 关键字定义一个类。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-使用-super-访问父类成员，而非父类的-prototype。"><span class="nav-number">3.7.2.</span> <span class="nav-text">[强制] 使用 super 访问父类成员，而非父类的 prototype。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-模块"><span class="nav-number">3.8.</span> <span class="nav-text">3.8 模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-export-与内容定义放在一起。"><span class="nav-number">3.8.1.</span> <span class="nav-text">[强制] export 与内容定义放在一起。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-相互之间无关联的内容使用命名导出。"><span class="nav-number">3.8.2.</span> <span class="nav-text">[建议] 相互之间无关联的内容使用命名导出。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-所有-import-语句写在模块开始处。"><span class="nav-number">3.8.3.</span> <span class="nav-text">[强制] 所有 import 语句写在模块开始处。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-集合"><span class="nav-number">3.9.</span> <span class="nav-text">3.9 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-对数组进行连接操作时，使用数组展开语法。"><span class="nav-number">3.9.1.</span> <span class="nav-text">[建议] 对数组进行连接操作时，使用数组展开语法。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-不要使用数组展开进行数组的复制操作。"><span class="nav-number">3.9.2.</span> <span class="nav-text">[建议] 不要使用数组展开进行数组的复制操作。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-尽可能使用-for-of-进行遍历。"><span class="nav-number">3.9.3.</span> <span class="nav-text">[建议] 尽可能使用 for .. of 进行遍历。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-当键值有可能不是字符串时，必须使用-Map；当元素有可能不是字符串时，必须使用-Set。"><span class="nav-number">3.9.4.</span> <span class="nav-text">[强制] 当键值有可能不是字符串时，必须使用 Map；当元素有可能不是字符串时，必须使用 Set。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-需要一个不可重复的集合时，应使用-Set。"><span class="nav-number">3.9.5.</span> <span class="nav-text">[建议] 需要一个不可重复的集合时，应使用 Set。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-当需要遍历功能时，使用-Map-和-Set。"><span class="nav-number">3.9.6.</span> <span class="nav-text">[建议] 当需要遍历功能时，使用 Map 和 Set。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-程序运行过程中有添加或移除元素的操作时，使用-Map-和-Set。"><span class="nav-number">3.9.7.</span> <span class="nav-text">[建议] 程序运行过程中有添加或移除元素的操作时，使用 Map 和 Set。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-异步"><span class="nav-number">3.10.</span> <span class="nav-text">3.10 异步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-回调函数的嵌套不得超过3层。"><span class="nav-number">3.10.1.</span> <span class="nav-text">[强制] 回调函数的嵌套不得超过3层。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-Promise-代替-callback。"><span class="nav-number">3.10.2.</span> <span class="nav-text">[建议] 使用 Promise 代替 callback。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-使用标准的-Promise-API。"><span class="nav-number">3.10.3.</span> <span class="nav-text">[强制] 使用标准的 Promise API。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-不允许直接扩展-Promise-对象的-prototype。"><span class="nav-number">3.10.4.</span> <span class="nav-text">[强制] 不允许直接扩展 Promise 对象的 prototype。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-不得为了编写的方便，将可以并行的IO过程串行化。"><span class="nav-number">3.10.5.</span> <span class="nav-text">[强制] 不得为了编写的方便，将可以并行的IO过程串行化。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-async-await-代替-generator-co。"><span class="nav-number">3.10.6.</span> <span class="nav-text">[建议] 使用 async/await 代替 generator + co。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-环境"><span class="nav-number">4.</span> <span class="nav-text">4 环境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-运行环境"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 运行环境</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-持续跟进与关注运行环境对语言特性的支持程度。"><span class="nav-number">4.1.1.</span> <span class="nav-text">[建议] 持续跟进与关注运行环境对语言特性的支持程度。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制-在运行环境中没有-Promise-时，将-Promise-的实现-shim-到-global-中。"><span class="nav-number">4.1.2.</span> <span class="nav-text">[强制] 在运行环境中没有 Promise 时，将 Promise 的实现 shim 到 global 中。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-预编译"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 预编译</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-babel-做为预编译工具时，建议使用-5-x-版本。"><span class="nav-number">4.2.1.</span> <span class="nav-text">[建议] 使用 babel 做为预编译工具时，建议使用 5.x 版本。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-babel-做为预编译工具时，通过-external-helpers-减少生成文件的大小。"><span class="nav-number">4.2.2.</span> <span class="nav-text">[建议] 使用 babel 做为预编译工具时，通过 external-helpers 减少生成文件的大小。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-TypeScript-做为预编译工具时，建议使用-1-6-版本。"><span class="nav-number">4.2.3.</span> <span class="nav-text">[建议] 使用 TypeScript 做为预编译工具时，建议使用 1.6+ 版本。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-TypeScript-做为预编译工具时，不使用-tsc-命令。"><span class="nav-number">4.2.4.</span> <span class="nav-text">[建议] 使用 TypeScript 做为预编译工具时，不使用 tsc 命令。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-生成的代码在浏览器环境运行时，应生成-AMD-模块化代码。"><span class="nav-number">4.2.5.</span> <span class="nav-text">[建议] 生成的代码在浏览器环境运行时，应生成 AMD 模块化代码。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-浏览器端项目中如果-ESNext-代码和-ES3-5-代码混合，不要使用-TypeScript-做为预编译工具。"><span class="nav-number">4.2.6.</span> <span class="nav-text">[建议] 浏览器端项目中如果 ESNext 代码和 ES3/5 代码混合，不要使用 TypeScript 做为预编译工具。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-AMD-CommonJS-模块依赖-ESNext-模块时，AMD-CommonJS-模块对-default-export-的-require-需要改造。"><span class="nav-number">4.2.7.</span> <span class="nav-text">[建议] AMD/CommonJS 模块依赖 ESNext 模块时，AMD/CommonJS 模块对 default export 的 require 需要改造。</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
    Copyright
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
        <a class="theme-link" style="font-weight: bold" href="http://www.hqxdb.com">
                HQXDB
        </a>
  </span>
  <span class="author" itemprop="copyrightHolder">          All Rights Reserved</span>
</div>

    <div class="copyright" >
        <div class="powered-by">
            <i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
                您是本站第:<span id="busuanzi_value_site_uv"></span>小伙伴
            </span>
            </div>
            &nbsp; &nbsp;
        <div class="theme-info">
            <i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
            <span id="busuanzi_container_site_pv">
                访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
        </div> 
    </div>  




<div class="copyright" >
    <div class="theme-info">
        <div class="powered-by"></div>
        <span class="post-count">全站共38.2k字</span>
    </div>
    <div class="theme-info">
        <p >Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
    </div>
</div>
 


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  








  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.2"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("O2hmtK2mQpfdBmGoA76EMBhl-gzGzoHsz", "lnKEwduB3MIqDtmxVdLk1EyY");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

  

  

</body>
</html>
